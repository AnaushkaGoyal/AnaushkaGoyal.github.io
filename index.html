<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Anaushka Goyal — Geospatial Intelligence</title>

  <style>
    :root{
      --bg:#000000;
      --fg:#ffffff;
      --muted: rgba(255,255,255,.72);
      --thin: rgba(255,255,255,.18);
      --thin2: rgba(255,255,255,.10);

      --ring1: rgba(255,255,255,.90);
      --ring2: rgba(255,255,255,.60);
      --ring3: rgba(255,255,255,.40);

      --maxw: 1280px;
      --panelW: min(720px, 54vw);
      --mapW: min(720px, 56vw);
      --mapH: min(78vh, 720px);
    } 

    *{ box-sizing:border-box; }
    html{ scroll-behavior:smooth; }
    body{
      margin:0;
      background: var(--bg);
      color: var(--fg);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      overflow-x:hidden;
    }

    .wrap{
      max-width: var(--maxw);
      margin: 0 auto;
      padding: 0 24px;
    }

    /* HERO */
    header.hero{
      min-height: 100vh;
      display:flex;
      align-items:stretch;
      padding: 22px 0 10px;
      position:relative;
    }

    .heroGrid{
      width:100%;
      display:grid;
      grid-template-columns: 1fr 1.35fr; /* left text, right map */
      gap: 28px;
      align-items:stretch;
    }

    .heroLeft{
      display:flex;
      flex-direction:column;
      justify-content:center;
      padding: 10vh 0;
    }

    /* No “pretty UI” here: pure text */
    .line1{
      font-size: 22px;
      line-height:1.15;
      letter-spacing: .01em;
      opacity: 0;
      transform: translateY(6px);
      transition: opacity .28s ease, transform .28s ease;
    }
    .line2{
      margin-top: 10px;
      font-size: 16px;
      color: var(--muted);
      line-height:1.35;
      max-width: 52ch;
      opacity: 0;
      transform: translateY(6px);
      transition: opacity .28s ease, transform .28s ease;
    }

    /* Quick reveal states */
    body.ready .line1{ opacity:1; transform: translateY(0); }
    body.ready2 .line2{ opacity:1; transform: translateY(0); }

    .heroRight{
      display:flex;
      align-items:center;
      justify-content:flex-end;
    }

    /* Map frame: no rounded, no translucency */
    .mapFrame{
      width: var(--mapW);
      height: var(--mapH);
      border: 1px solid var(--thin);
      background: #000; /* solid */
      overflow:hidden;
      position:relative;
      transition: width .35s ease, height .35s ease, transform .35s ease, top .35s ease, right .35s ease;
    }

    svg{ display:block; width:100%; height:100%; }

    .land{
      fill: none;                 /* pure linework feel */
      stroke: rgba(255,255,255,.22);
      stroke-width: 1.1;
      vector-effect: non-scaling-stroke;
    }

    /* SOLID rings (no glow) */
    .ring{
      fill:none;
      stroke: var(--ring1);
      stroke-width: 2;
      opacity:.9;
      vector-effect: non-scaling-stroke;
    }
    .ring.secondary{
      stroke: var(--ring2);
      stroke-width: 1.6;
      opacity:.75;
    }
    .ring.tertiary{
      stroke: var(--ring3);
      stroke-width: 1.3;
      opacity:.65;
    }

    /* Pulse: increase/decrease size */
    .pulse { transform-origin:center; animation: pulse 2.1s ease-in-out infinite; }
    .pulse.slow { animation-duration: 2.8s; }
    .pulse.fast { animation-duration: 1.7s; }

    @keyframes pulse{
      0%{ transform: scale(.88); opacity:.55; }
      45%{ transform: scale(1.14); opacity:.95; }
      100%{ transform: scale(.88); opacity:.55; }
    }

    /* SCROLL BEHAVIOR: compress hero + pin map near top-right */
    body.scrolled header.hero{
      min-height: 54vh;
      padding-top: 14px;
    }

    body.scrolled .heroLeft{
      padding: 5vh 0 0;
    }

    body.scrolled .mapFrame{
      position: fixed;
      top: 14px;
      right: 14px;
      width: min(520px, 44vw);
      height: min(340px, 40vh);
      z-index: 50;
    }

    /* PROJECTS PANEL (square, solid, internal scroll) */
    .projectsShell{
      padding: 32px 0 0;
    }

    /* The “tab/panel” that appears after scroll */
    .projectsPanel{
      width: var(--panelW);
      border: 1px solid var(--thin);
      background: #000;
      display:grid;
      grid-template-columns: 260px 1fr;
      min-height: 64vh;
      max-height: 72vh;
      overflow:hidden;

      opacity: 0;
      transform: translateY(18px);
      transition: opacity .28s ease, transform .28s ease;
    }
    body.scrolled .projectsPanel{
      opacity: 1;
      transform: translateY(0);
    }

    .projList{
      border-right: 1px solid var(--thin);
      overflow:auto;
      padding: 14px 0;
    }
    .projList::-webkit-scrollbar{ width: 10px; }
    .projList::-webkit-scrollbar-thumb{ background: rgba(255,255,255,.18); }

    .projItem{
      padding: 12px 14px;
      cursor:pointer;
      color: rgba(255,255,255,.86);
      border-bottom: 1px solid var(--thin2);
      user-select:none;
    }
    .projItem:hover{ background: rgba(255,255,255,.04); }
    .projItem.active{ background: rgba(255,255,255,.07); }

    .projDetail{
      padding: 18px 18px;
      overflow:auto;
    }
    .projDetail::-webkit-scrollbar{ width: 10px; }
    .projDetail::-webkit-scrollbar-thumb{ background: rgba(255,255,255,.18); }

    .projTitle{
      font-size: 18px;
      margin: 0 0 10px 0;
      letter-spacing:.01em;
    }
    .projMeta{
      font-size: 13px;
      color: var(--muted);
      margin: 0 0 14px 0;
    }
    .projBody{
      font-size: 14px;
      color: rgba(255,255,255,.88);
      line-height:1.55;
      margin:0;
      max-width: 62ch;
    }

    /* Layout for the “one elongated page” feel */
    .belowHero{
      display:grid;
      grid-template-columns: 1fr 1.35fr;
      gap: 28px;
      align-items:start;
      padding-bottom: 100px;
    }
    /* left column aligns with hero text; right column reserved because map pins there */
    body.scrolled .belowHero{
      /* keep content from going under pinned map */
      padding-right: min(520px, 44vw);
    }

    .sectionLabel{
      font-size: 12px;
      letter-spacing: .12em;
      text-transform: uppercase;
      color: var(--muted);
      margin: 0 0 12px 0;
    }

    /* ABOUT (keep simple, square) */
    section#about{
      padding: 80px 0 120px;
    }
    .aboutGrid{
      border: 1px solid var(--thin);
      display:grid;
      grid-template-columns: 1fr 1fr;
      min-height: 52vh;
    }
    .aboutCol{
      padding: 18px;
    }
    .aboutCol + .aboutCol{
      border-left: 1px solid var(--thin);
    }
    .aboutBlock{
      padding: 12px 0;
      border-bottom: 1px solid var(--thin2);
    }
    .aboutBlock:last-child{ border-bottom:none; }
    .aboutH{
      font-size: 12px;
      letter-spacing:.10em;
      text-transform: uppercase;
      color: var(--muted);
      margin: 0 0 8px 0;
    }
    .aboutText{
      margin:0;
      color: rgba(255,255,255,.88);
      line-height:1.55;
      font-size: 14px;
    }

    /* Responsive */
    @media (max-width: 980px){
      .heroGrid, .belowHero{ grid-template-columns: 1fr; }
      .heroRight{ justify-content:stretch; }
      .mapFrame{ width: 100%; height: min(62vh, 520px); }
      body.scrolled .mapFrame{
        left: 14px;
        right: 14px;
        width: calc(100vw - 28px);
        height: min(40vh, 320px);
      }
      body.scrolled .belowHero{ padding-right: 0; }
      .projectsPanel{ width: 100%; grid-template-columns: 1fr; }
      .projList{ border-right:none; border-bottom: 1px solid var(--thin); max-height: 240px; }
      .aboutGrid{ grid-template-columns: 1fr; }
      .aboutCol + .aboutCol{ border-left:none; border-top: 1px solid var(--thin); }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header class="hero" id="hero">
      <div class="heroGrid">
        <div class="heroLeft">
          <div class="line1" id="line1">Hello, I’m <span style="opacity:.95;">Anaushka Goyal</span>.</div>
          <div class="line2" id="line2">Geospatial Intelligence that drives real decisions.</div>
        </div>

        <div class="heroRight">
          <div class="mapFrame" id="mapFrame">
            <svg id="viz"></svg>
          </div>
        </div>
      </div>
    </header>
  </div>

  <!-- After a small scroll, projects panel appears (one-page feel) -->
  <div class="wrap projectsShell">
    <div class="belowHero">
      <div>
        <div class="sectionLabel">Projects</div>
        <!-- empty left column here by design: keeps it Senseable-clean -->
      </div>

      <div>
        <div class="projectsPanel" id="projectsPanel">
          <div class="projList" id="projList"></div>
          <div class="projDetail" id="projDetail">
            <h3 class="projTitle" id="projTitle"></h3>
            <div class="projMeta" id="projMeta"></div>
            <p class="projBody" id="projBody"></p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- About (same “single elongated page” feel, square edges) -->
  <section id="about">
    <div class="wrap">
      <div class="sectionLabel">About</div>
      <div class="aboutGrid">
        <div class="aboutCol">
          <div class="aboutBlock">
            <div class="aboutH">Education</div>
            <p class="aboutText"><b>UPenn MCP (’26)</b> — Urban Spatial Analytics / Smart Cities</p>
          </div>
          <div class="aboutBlock">
            <div class="aboutH">Skills</div>
            <p class="aboutText">R (sf/tidyverse), Python (pandas/geopandas), SQL/PostGIS, ArcGIS Pro/Online, storytelling maps.</p>
          </div>
        </div>
        <div class="aboutCol">
          <div class="aboutBlock">
            <div class="aboutH">Work Experience</div>
            <p class="aboutText">Research Assistant (Philadelphia school planning & dashboards) • Zoning Atlas research & standardization.</p>
          </div>
          <div class="aboutBlock">
            <div class="aboutH">Volunteering</div>
            <p class="aboutText">Urban Tech Club • civic engagement projects • conference + research coordination.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
  <script>
    /* =========================
       0) FAST INTRO TEXT
       ========================= */
    // Rings start immediately. Text appears quickly after.
    setTimeout(() => document.body.classList.add("ready"), 350);
    setTimeout(() => document.body.classList.add("ready2"), 650);

    /* =========================
       1) SCROLL: toggle "scrolled" state after small scroll
       ========================= */
    const hero = document.getElementById("hero");
    const toggleScrolled = () => {
      // “a little scroll” threshold:
      const y = window.scrollY || 0;
      document.body.classList.toggle("scrolled", y > 90);
    };
    window.addEventListener("scroll", toggleScrolled, { passive:true });
    toggleScrolled();

    /* =========================
       2) PROJECTS: square panel with internal scroll list
       (7–8 tabs, like you said)
       ========================= */
    const PROJECTS = [
      {
        title: "Philadelphia Signals",
        meta: "R • sf • join • GeoJSON",
        body: "Spatially joined signal points to neighborhood boundaries and reframed raw device counts into legible patterns that read like a city breathing."
      },
      {
        title: "School–Community Dashboard",
        meta: "Mapping • narrative • public-facing clarity",
        body: "Translated complex facilities decisions into understandable visuals and story-driven evidence for non-technical audiences."
      },
      {
        title: "Zoning Atlas Standardization",
        meta: "Policy data • QA • consistency at scale",
        body: "Systematized zoning updates into comparable, planning-ready records across municipalities."
      },
      { title: "Project 04", meta: "Add later", body: "Drop your description here." },
      { title: "Project 05", meta: "Add later", body: "Drop your description here." },
      { title: "Project 06", meta: "Add later", body: "Drop your description here." },
      { title: "Project 07", meta: "Add later", body: "Drop your description here." },
      { title: "Project 08", meta: "Add later", body: "Drop your description here." }
    ];

    const projList = document.getElementById("projList");
    const projTitle = document.getElementById("projTitle");
    const projMeta  = document.getElementById("projMeta");
    const projBody  = document.getElementById("projBody");

    function setActive(i){
      const p = PROJECTS[i];
      projTitle.textContent = p.title;
      projMeta.textContent  = p.meta;
      projBody.textContent  = p.body;

      [...projList.children].forEach((el, idx) => {
        el.classList.toggle("active", idx === i);
      });
    }

    projList.innerHTML = PROJECTS.map((p, i) =>
      `<div class="projItem" data-i="${i}">${p.title}</div>`
    ).join("");

    projList.addEventListener("click", (e) => {
      const item = e.target.closest(".projItem");
      if(!item) return;
      setActive(Number(item.dataset.i));
    });

    setActive(0);

    /* =========================
       3) MAP + RINGS (minimal)
       - solid black background
       - boundary + pulsing rings
       - projection corrected with fitSize()
       ========================= */

    // Replace these with *raw* GitHub file links:
    const DATA_URL = "https://raw.githubusercontent.com/AnaushkaGoyal/AnaushkaGoyal.github.io/main/data/pa_signals.geojson";

    const svg = d3.select("#viz");
    const g = svg.append("g");

    let width, height, projection, path;

    function resize(){
     const frame = document.getElementById("mapFrame");
     width = frame.clientWidth;
     height = frame.clientHeight;
     svg.attr("viewBox", `0 0 ${width} ${height}`);

    if (window.__pointsGeojson){
      // Fit projection to points automatically
      projection = d3.geoMercator().fitSize([width, height], window.__pointsGeojson);
      path = d3.geoPath(projection);
      renderMap();
     }
    }
    window.addEventListener("resize", resize);

    function num(v){
      const x = Number(v);
      return Number.isFinite(x) ? x : 0;
    }

    // If you have tabE / lapE / phoneE, we use them.
    // If not, rings still render with a default radius.
    function getProps(f){
      const p = f.properties || {};
      return {
        tab: num(p.tabE),
        lap: num(p.lapE),
        pho: num(p.phoneE)
      };
    }

    function renderMap(){
      g.selectAll("*").remove();

      // Boundary linework
      g.append("path")
        .datum(window.__boundaryGeojson)
        .attr("class", "land")
        .attr("d", path);

      const feats = (window.__pointsGeojson && window.__pointsGeojson.features) ? window.__pointsGeojson.features : [];

      // Scale radii gently so it never looks chaotic
      const vals = feats.map(f => {
        const {tab, lap, pho} = getProps(f);
        return Math.max(tab, lap, pho);
      });
      const maxV = d3.max(vals) || 1;
      const r = d3.scaleSqrt().domain([0, maxV]).range([7, 22]);

      // Primary ring (tabE)
      g.append("g")
        .selectAll("circle.r1")
        .data(feats)
        .enter()
        .append("circle")
        .attr("class", "ring pulse fast")
        .attr("cx", d => projection(d.geometry.coordinates)[0])
        .attr("cy", d => projection(d.geometry.coordinates)[1])
        .attr("r", d => {
          const {tab} = getProps(d);
          return maxV === 1 ? 12 : r(tab);
        });

      // Secondary ring (lapE)
      g.append("g")
        .selectAll("circle.r2")
        .data(feats)
        .enter()
        .append("circle")
        .attr("class", "ring secondary pulse")
        .attr("cx", d => projection(d.geometry.coordinates)[0])
        .attr("cy", d => projection(d.geometry.coordinates)[1])
        .attr("r", d => {
          const {lap} = getProps(d);
          return (maxV === 1 ? 20 : r(lap) + 6);
        });

      // Tertiary ring (phoneE)
      g.append("g")
        .selectAll("circle.r3")
        .data(feats)
        .enter()
        .append("circle")
        .attr("class", "ring tertiary pulse slow")
        .attr("cx", d => projection(d.geometry.coordinates)[0])
        .attr("cy", d => projection(d.geometry.coordinates)[1])
        .attr("r", d => {
          const {pho} = getProps(d);
          return (maxV === 1 ? 28 : r(pho) + 12);
        });
    }

    async function loadData(){
      const points = await fetch(DATA_URL).then(r => r.json());
      window.__pointsGeojson = points;
      resize();
    }

    loadData().catch(err => {
      console.error(err);
      // Keep the site clean even if data isn't wired yet
    });
  </script>
</body>
</html>